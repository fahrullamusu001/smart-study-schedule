<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Smart Study Schedule</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
}
.light{background:#f1f3f6;color:#000;}
.dark{background:#121212;color:#fff;}
.app{
  max-width:480px;
  margin:auto;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  background:#1976d2;
  color:white;
  padding:16px;
  text-align:center;
  font-weight:bold;
}
.content{flex:1;padding:12px;}
.card{
  background:white;
  border-radius:10px;
  padding:12px;
  margin-bottom:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}
.dark .card{background:#1e1e1e;}
input,select,button{
  width:100%;
  padding:8px;
  margin:4px 0;
}
button{
  background:#1976d2;
  color:white;
  border:none;
  border-radius:6px;
}
button.small{width:auto;padding:4px 8px;font-size:12px}
button.danger{background:#d32f2f}
.done{text-decoration:line-through;color:green}
.nav{
  display:flex;
  border-top:1px solid #ccc;
}
.nav button{
  flex:1;
  padding:10px;
  border:none;
  background:#eee;
}
.nav .active{background:#1976d2;color:white;}
.stats{
  font-size:14px;
  margin-bottom:10px;
}
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">
const {useState,useEffect}=React;

function App(){

const days=["Senin","Selasa","Rabu","Kamis","Jumat"];

const [tab,setTab]=useState("jadwal");
const [theme,setTheme]=useState(
localStorage.getItem("theme")||"light"
);

const [schedule,setSchedule]=useState(
JSON.parse(localStorage.getItem("schedule"))||
{Senin:[],Selasa:[],Rabu:[],Kamis:[],Jumat:[]}
);

const [tasks,setTasks]=useState(
JSON.parse(localStorage.getItem("tasks"))||[]
);

const [filter,setFilter]=useState("all");

const [formJadwal,setFormJadwal]=useState({day:"Senin",name:"",start:"",end:""});
const [formTask,setFormTask]=useState({title:"",date:"",time:""});
const [editIndex,setEditIndex]=useState(null);

useEffect(()=>{
localStorage.setItem("schedule",JSON.stringify(schedule));
localStorage.setItem("tasks",JSON.stringify(tasks));
localStorage.setItem("theme",theme);
},[schedule,tasks,theme]);

// JADWAL
const addJadwal=()=>{
if(!formJadwal.name||!formJadwal.start||!formJadwal.end)return;

if(editIndex!==null){
const c=[...schedule[formJadwal.day]];
c[editIndex]=formJadwal;
setSchedule({...schedule,[formJadwal.day]:c});
setEditIndex(null);
}else{
setSchedule({
...schedule,
[formJadwal.day]:[
...schedule[formJadwal.day],
{...formJadwal}
]
});
}

setFormJadwal({day:"Senin",name:"",start:"",end:""});
};

const editJadwal=(day,i)=>{
setFormJadwal(schedule[day][i]);
setEditIndex(i);
};

const delJadwal=(day,i)=>{
const c=[...schedule[day]];
c.splice(i,1);
setSchedule({...schedule,[day]:c});
};

// TUGAS
const addTask=()=>{
if(!formTask.title||!formTask.date||!formTask.time)return;

if(editIndex!==null){
const c=[...tasks];
c[editIndex]={...formTask,done:c[editIndex].done};
setTasks(c);
setEditIndex(null);
}else{
setTasks([...tasks,{...formTask,done:false}]);
}
setFormTask({title:"",date:"",time:""});
};

const toggleDone=i=>{
const c=[...tasks];
c[i].done=!c[i].done;
setTasks(c);
};

const editTask=i=>{
setFormTask(tasks[i]);
setEditIndex(i);
};

const delTask=i=>{
const c=[...tasks];
c.splice(i,1);
setTasks(c);
};

// FILTER
const filteredTasks=tasks.filter(t=>{
if(filter==="done") return t.done;
if(filter==="undone") return !t.done;
return true;
});

// STATS
const total=tasks.length;
const doneCount=tasks.filter(t=>t.done).length;

return(
<div className={`app ${theme}`}>
<header>
ğŸ“˜ Smart Study Schedule
<button onClick={()=>setTheme(theme==="light"?"dark":"light")}>
{theme==="light"?"ğŸŒ™":"â˜€ï¸"}
</button>
</header>

<div className="content">

{tab==="jadwal" && (
<>
<div className="card">
<h3>Tambah / Edit Jadwal</h3>
<select value={formJadwal.day}
onChange={e=>setFormJadwal({...formJadwal,day:e.target.value})}>
{days.map(d=><option key={d}>{d}</option>)}
</select>
<input placeholder="Mata pelajaran"
value={formJadwal.name}
onChange={e=>setFormJadwal({...formJadwal,name:e.target.value})}/>
<input type="time"
value={formJadwal.start}
onChange={e=>setFormJadwal({...formJadwal,start:e.target.value})}/>
<input type="time"
value={formJadwal.end}
onChange={e=>setFormJadwal({...formJadwal,end:e.target.value})}/>
<button onClick={addJadwal}>
{editIndex!==null?"Update":"Tambah"}
</button>
</div>

{days.map(d=>(
<div className="card" key={d}>
<b>{d}</b>
<ul>
{schedule[d].map((s,i)=>(
<li key={i}>
{s.name} ({s.start}-{s.end})
<button className="small" onClick={()=>editJadwal(d,i)}>âœï¸</button>
<button className="small danger" onClick={()=>delJadwal(d,i)}>âŒ</button>
</li>
))}
</ul>
</div>
))}
</>
)}

{tab==="tugas" && (
<>
<div className="card">
<h3>Tambah / Edit Tugas</h3>
<input placeholder="Nama tugas"
value={formTask.title}
onChange={e=>setFormTask({...formTask,title:e.target.value})}/>
<input type="date"
value={formTask.date}
onChange={e=>setFormTask({...formTask,date:e.target.value})}/>
<input type="time"
value={formTask.time}
onChange={e=>setFormTask({...formTask,time:e.target.value})}/>
<button onClick={addTask}>
{editIndex!==null?"Update":"Tambah"}
</button>
</div>

<div className="card stats">
Total: {total} | Selesai: {doneCount}
</div>

<div className="card">
<select value={filter} onChange={e=>setFilter(e.target.value)}>
<option value="all">Semua</option>
<option value="done">Selesai</option>
<option value="undone">Belum</option>
</select>

<ul>
{filteredTasks.map((t,i)=>(
<li key={i} className={t.done?"done":""}>
{t.title} ({t.date} {t.time})
<button className="small" onClick={()=>toggleDone(i)}>âœ…</button>
<button className="small" onClick={()=>editTask(i)}>âœï¸</button>
<button className="small danger" onClick={()=>delTask(i)}>âŒ</button>
</li>
))}
</ul>
</div>
</>
)}

</div>

<div className="nav">
<button className={tab==="jadwal"?"active":""}
onClick={()=>setTab("jadwal")}>ğŸ“… Jadwal</button>
<button className={tab==="tugas"?"active":""}
onClick={()=>setTab("tugas")}>ğŸ“ Tugas</button>
</div>
</div>
);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
