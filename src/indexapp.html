<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Smart Study Schedule</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f1f3f6;
}
.app{
  max-width:480px;
  margin:auto;
  background:#fff;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  background:#1976d2;
  color:white;
  padding:16px;
  text-align:center;
  font-size:18px;
  font-weight:bold;
}
.content{
  flex:1;
  padding:12px;
}
.card{
  background:white;
  border-radius:10px;
  padding:12px;
  margin-bottom:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}
input,select,button{
  width:100%;
  padding:8px;
  margin:4px 0;
}
button{
  background:#1976d2;
  color:white;
  border:none;
  border-radius:6px;
  font-size:14px;
}
button.danger{background:#d32f2f}
button.small{width:auto;padding:4px 8px;font-size:12px}
.done{text-decoration:line-through;color:green}
.nav{
  display:flex;
  border-top:1px solid #ccc;
}
.nav button{
  flex:1;
  border:none;
  background:#fafafa;
  padding:10px;
}
.nav button.active{
  background:#1976d2;
  color:white;
}
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">
const {useState,useEffect}=React;

function App(){
const days=["Senin","Selasa","Rabu","Kamis","Jumat"];
const [tab,setTab]=useState("jadwal");

const [schedule,setSchedule]=useState(
JSON.parse(localStorage.getItem("schedule"))||
{Senin:[],Selasa:[],Rabu:[],Kamis:[],Jumat:[]}
);
const [tasks,setTasks]=useState(
JSON.parse(localStorage.getItem("tasks"))||[]
);

const [formJadwal,setFormJadwal]=useState({day:"Senin",name:"",start:"",end:""});
const [formTask,setFormTask]=useState({title:"",date:"",time:""});

useEffect(()=>{
localStorage.setItem("schedule",JSON.stringify(schedule));
localStorage.setItem("tasks",JSON.stringify(tasks));
},[schedule,tasks]);

useEffect(()=>{
if("Notification"in window && Notification.permission==="default"){
Notification.requestPermission();
}
},[]);

// Notifikasi
useEffect(()=>{
const interval=setInterval(()=>{
const now=new Date();
const today=now.toISOString().split("T")[0];
const timeNow=now.toTimeString().slice(0,5);

// Tugas
tasks.forEach(t=>{
if(!t.done && t.date===today && t.time===timeNow){
new Notification("â° Waktunya Belajar",{body:t.title});
}
});

// Jadwal
days.forEach(d=>{
schedule[d].forEach(s=>{
const [h,m]=s.start.split(":");
const notif=new Date();
notif.setHours(h);
notif.setMinutes(m-1);
if(
notif.getHours()===now.getHours() &&
notif.getMinutes()===now.getMinutes()
){
new Notification("ğŸ“š Pelajaran Akan Dimulai",{body:s.name});
}
});
});
},30000);
return()=>clearInterval(interval);
},[schedule,tasks]);

// Jadwal
const addJadwal=()=>{
if(!formJadwal.name||!formJadwal.start||!formJadwal.end)return;
setSchedule({
...schedule,
[formJadwal.day]:[
...schedule[formJadwal.day],
{...formJadwal}
]
});
setFormJadwal({day:"Senin",name:"",start:"",end:""});
};
const delJadwal=(day,i)=>{
const c=[...schedule[day]];
c.splice(i,1);
setSchedule({...schedule,[day]:c});
};

// Tugas
const addTask=()=>{
if(!formTask.title||!formTask.date||!formTask.time)return;
setTasks([...tasks,{...formTask,done:false}]);
setFormTask({title:"",date:"",time:""});
};
const toggleDone=i=>{
const c=[...tasks];
c[i].done=!c[i].done;
setTasks(c);
};
const delTask=i=>{
const c=[...tasks];
c.splice(i,1);
setTasks(c);
};

return(
<div className="app">
<header>ğŸ“˜ Smart Study Schedule</header>

<div className="content">
{tab==="jadwal" && (
<>
<div className="card">
<h3>Tambah Jadwal</h3>
<select value={formJadwal.day} onChange={e=>setFormJadwal({...formJadwal,day:e.target.value})}>
{days.map(d=><option key={d}>{d}</option>)}
</select>
<input placeholder="Mata pelajaran" value={formJadwal.name}
onChange={e=>setFormJadwal({...formJadwal,name:e.target.value})}/>
<input type="time" value={formJadwal.start}
onChange={e=>setFormJadwal({...formJadwal,start:e.target.value})}/>
<input type="time" value={formJadwal.end}
onChange={e=>setFormJadwal({...formJadwal,end:e.target.value})}/>
<button onClick={addJadwal}>Tambah</button>
</div>

{days.map(d=>(
<div className="card" key={d}>
<b>{d}</b>
<ul>
{schedule[d].map((s,i)=>(
<li key={i}>
{s.name} ({s.start}-{s.end})
<button className="small danger" onClick={()=>delJadwal(d,i)}>âŒ</button>
</li>
))}
</ul>
</div>
))}
</>
)}

{tab==="tugas" && (
<>
<div className="card">
<h3>Tambah Tugas / Ujian</h3>
<input placeholder="Nama tugas" value={formTask.title}
onChange={e=>setFormTask({...formTask,title:e.target.value})}/>
<input type="date" value={formTask.date}
onChange={e=>setFormTask({...formTask,date:e.target.value})}/>
<input type="time" value={formTask.time}
onChange={e=>setFormTask({...formTask,time:e.target.value})}/>
<button onClick={addTask}>Tambah</button>
</div>

<div className="card">
<ul>
{tasks.map((t,i)=>(
<li key={i} className={t.done?"done":""}>
{t.title} ({t.date} {t.time})
<button className="small" onClick={()=>toggleDone(i)}>âœ…</button>
<button className="small danger" onClick={()=>delTask(i)}>âŒ</button>
</li>
))}
</ul>
</div>
</>
)}
</div>

<div className="nav">
<button className={tab==="jadwal"?"active":""} onClick={()=>setTab("jadwal")}>ğŸ“… Jadwal</button>
<button className={tab==="tugas"?"active":""} onClick={()=>setTab("tugas")}>ğŸ“ Tugas</button>
</div>
</div>
);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
